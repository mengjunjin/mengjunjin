"use strict";!function(){var r=document.querySelector("tbody"),c=document.querySelector("thead"),e=document.querySelector(".panel-body"),t=document.querySelector("#dele");function a(){var t=(JSON.parse(localStorage.getItem("shoppingCart"))||[]).filter(function(t){return t.isSelected}).reduce(function(t,e){return console.log(t,e),console.log(e.price,e.number),t+ +e.price*e.number},0);e.innerHTML=t}function o(){var t=JSON.parse(localStorage.getItem("shoppingCart"))||[],e=t.every(function(t){return t.isSelected});c.innerHTML='\n        <tr>\n            <th class=" text-center"> <input '+(e?"checked":"")+'  type="checkbox">全选 </th>\n            <th class=" text-center">商品</th>\n            <th class=" text-center">商品信息</th>\n            <th class=" text-center">单品总计</th>\n            <th class=" text-center">商品价格</th>\n            <th class=" text-center">商品数量</th>\n            <th class=" text-center">操作</th>\n        </tr>\n        ';var n="";t.forEach(function(t){n+='<tr>\n                <td><input class = "ppp" '+(t.isSelected?"checked":"")+' data-id="'+t.tradeItemId+'" type="checkbox"></td>\n                <td><img style = "width:100px;hegiht:100px" alt="Responsive image" src="'+t.img+'"></td>\n                <td>'+t.title+"</td>\n                <td>"+t.price*t.number+"</td>\n                <td>"+t.price+"</td>\n                <td>"+t.number+'</td>\n                <td>\n                    <button data-id="'+t.tradeItemId+'" class="button">+</button>\n                    <button data-id="'+t.tradeItemId+'" class="button">-</button>\n                </td>\n            </tr>\n        '}),r.innerHTML=n}document.getElementById("btn"),o(),a(),t.onclick=function(){window.localStorage.clear(),o(),a()},c.onclick=function(t){var e;"INPUT"==t.target.tagName&&(e=t.target.checked,(t=JSON.parse(localStorage.getItem("shoppingCart"))).forEach(function(t){t.isSelected=e}),localStorage.setItem("shoppingCart",JSON.stringify(t)),a(),o())},r.onclick=function(t){var e,n,r=JSON.parse(localStorage.getItem("shoppingCart"));"INPUT"===t.target.tagName?(e=t.target.getAttribute("data-id"),console.log("选中一条id为"+e+"的数据"),(n=r.find(function(t){return t.tradeItemId==e})).isSelected=t.target.checked,localStorage.setItem("shoppingCart",JSON.stringify(r)),a(),o()):"+"===t.target.innerHTML?(e=t.target.getAttribute("data-id"),n=r.find(function(t){return t.tradeItemId==e}),console.log(n),n.number++,localStorage.setItem("shoppingCart",JSON.stringify(r)),o(),a()):"-"===t.target.innerHTML&&(e=t.target.getAttribute("data-id"),(n=r.find(function(t){return t.tradeItemId==e})).number--,0===n.number&&(t=r.indexOf(n),r.splice(t,1)),console.log(n),localStorage.setItem("shoppingCart",JSON.stringify(r)),o(),a())}}();